---
title: ä»Šæ—¥æ ¡å›­è‡ªåŠ¨ç­¾åˆ°
abbrlink: def5
date: 2020-06-02 16:06:07
toc: true
tags:
	- python
	- ä»Šæ—¥æ ¡å›­
---

**æ³¨æ„ï¼šæœ¬æ–‡åªä»æŠ€æœ¯ä¸Šè®¨è®ºè‡ªåŠ¨ç­¾åˆ°çš„å¯è¡Œæ€§ï¼Œå¹¶ä¸é¼“åŠ±å¤§å®¶ä½¿ç”¨ï¼Œä¸”è‡ªè¡Œæ‰¿æ‹…ä½¿ç”¨çš„åæœã€‚**

æœ¬æ–‡ä»£ç è¾ƒå¤šï¼Œå»ºè®®ç”µè„‘è§‚çœ‹

<!--more-->



## 1.1 æŠ“åŒ…

æŠ“åŒ…éœ€è¦æ³¨æ„å‡ ç‚¹ï¼š

- Android7.0ä»¥ä¸Šéœ€è¦rootæƒé™ï¼Œåœ¨ â‰¥7.0çš„æœºå™¨ä¸­é»˜è®¤**ä¸å†ä¿¡ä»»ç”¨æˆ·è¯ä¹¦**ã€‚
- ä»Šæ—¥æ ¡å›­ä½¿ç”¨äº†**ssl pinning(å›ºå®šè¯ä¹¦)**
- Androidç‰ˆæœ¬ ï¼œ9.0å¯ä»¥ä½¿ç”¨**Xposed + JustTrustMe** æ¥ç»•è¿‡ç¬¬äºŒæ¡
- Androidç‰ˆæœ¬  â‰¥9.0éœ€è¦ä½¿ç”¨**EdXposed + TrustMeAlready** æ¥ç»•è¿‡ç¬¬äºŒæ¡

ä½†æ˜¯å› ä¸ºæ— è®ºæ˜¯**Magisk**è¿˜æ˜¯**Xposed**æˆ–è€…**EdXposed**éƒ½æœ‰**æ‰‹æœºå˜ç –çš„é£é™©**ï¼Œä¸å»ºè®®æ²¡æœ‰ç»éªŒçš„åŒå­¦å°è¯•ã€‚ä½†è¿˜æœ‰ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•ï¼Œéšä¾¿ä¸‹è½½ä¸€ä¸ªä¸»æµAndroidæ¨¡æ‹Ÿå™¨ï¼Œæ·»åŠ ä¸€ä¸ª**Android 5.0**çš„æ¨¡æ‹Ÿå™¨å°±å¯ä»¥æ„‰å¿«çš„æŠ“åŒ…äº†ã€‚

## 1.2 æ¥å£

æŠ›å»æ¯”è¾ƒå¤šä¸”æ— è¶£çš„æ•°æ®åŒ…çš„åˆ†æç­‰æ“ä½œï¼Œæœ€ç»ˆæŠ“åˆ°äº†ä»¥ä¸‹å‡ ä¸ªæ¥å£ï¼š

#### **1. æŸ¥è¯¢ä»Šæ—¥å¾…å¡«è¡¨å•**

```
/wec-counselor-collector-apps/stu/collector/queryCollectorProcessingList
```

**Postè¯·æ±‚æ ¼å¼**

```json
{"pageSize":10,"pageNumber":1}
```

**è¿”å›çš„Jsonæ•°æ®**

```json
{
    "code":"0",
    "message":"SUCCESS",
    "datas":{
        "totalSize":1,
        "pageSize":10,
        "pageNumber":1,
        "rows":[
            {
                "wid":"19340",
                "formWid":"309",
                "priority":"5",
                "subject":"ã€æ•™è‚²å…ã€‘ç–«æƒ…é˜²æ§æƒ…å†µè°ƒæŸ¥è¡¨ï¼ˆxæœˆxæ—¥ï¼‰",
                "content":"æ ‡è¯­é“¾æ¥(Unicodeç¼–ç )",
                "senderUserName":"è¡¨å•å‘å¸ƒè€…",
                "createTime":"2020-06-06 07:30",
                "startTime":"2020-06-06 00:05",
                "endTime":"2020-06-06 13:00",
                "currentTime":"2020-06-06 07:54:05",
                "isHandled":0,
                "isRead":0
            }]
    }
}

```

#### **2. æŸ¥è¯¢è¡¨å•çš„åŸºæœ¬ä¿¡æ¯**

```
/wec-counselor-collector-apps/stu/collector/detailCollector
```

**Postè¯·æ±‚æ ¼å¼**

```json
{"collectorWid": collectorWid}
```

collectorWidå°±æ˜¯æ¥å£1ä¸­çš„wid

**è¿”å›çš„jsonæ•°æ®**

```json
{
     "code": "0",
     "message": "SUCCESS",
     "datas": {
          "collector": {
               "wid": "19340",
               "formWid": "309",
               "priority": "5",
               "endTime": "2020-06-06 13:00:00",
               "currentTime": "2020-06-06 10:31:39",
               "schoolTaskWid": "55898",
               "isConfirmed": 0,
               "senderUserName": "è¡¨å•å‘å¸ƒè€…",
               "createTime": "2020-06-06 07:30:47",
               "attachmentUrls": null,
               "attachmentNames": null,
               "attachmentSizes": null,
               "isUserSubmit": 0,
               "fetchStuLocation": true,
               "address": null
          },
          "form": {
               "wid": "309",
               "formTitle": "ã€æ•™è‚²å…ã€‘ç–«æƒ…é˜²æ§æƒ…å†µè°ƒæŸ¥è¡¨ï¼ˆxæœˆxæ—¥ï¼‰",
               "formContent": "æ ‡è¯­é“¾æ¥(Unicodeç¼–ç )",
               "backReason": null,
               "isBack": 0,
               "attachments": []
          }
     }
}
```

#### 3. æŸ¥è¯¢è¡¨å•é€‰é¡¹ç­‰è¯¦ç»†ä¿¡æ¯


```
/wec-counselor-collector-apps/stu/collector/getFormFields
```

**Postè¯·æ±‚æ ¼å¼**

```json
{"formWid":formWid, "collectorWid":collectorWid}
```

**è¿”å›çš„Jsonæ•°æ®**

```json
{
     "code": "0",
     "message": "SUCCESS",
     "datas": {
          "totalSize": 21,
          "pageSize": -1,
          "pageNumber": -1,
          "existData": 1,
          "rows": [
               {
                    "wid": "5766",
                    "formWid": "309",
                    "fieldType": 2,
                    "title": "ä½ çš„å­¦ç”Ÿç±»åˆ«",
                    "description": "",
                    "minLength": 0,
                    "sort": "1",
                    "maxLength": null,
                    "isRequired": 1,
                    "imageCount": null,
                    "hasOtherItems": 0,
                    "colName": "field001",
                    "value": "",
                    "minValue": 0,
                    "maxValue": 0,
                    "isDecimal": true,
                    "fieldItems": [
                         {
                              "itemWid": "14741",
                              "content": "ä¸“ç§‘ç”Ÿ",
                              "isOtherItems": 0,
                              "contendExtend": "",
                              "isSelected": 1
                         },
                         {
                              "itemWid": "14742",
                              "content": "æœ¬ç§‘ç”Ÿ",
                              "isOtherItems": 0,
                              "contendExtend": "",
                              "isSelected": null
                         },
                         {
                              "itemWid": "14743",
                              "content": "ç ”ç©¶ç”Ÿ",
                              "isOtherItems": 0,
                              "contendExtend": "",
                              "isSelected": null
                         }
                    ]
               }
               ......
```

`rows`ä¸­çš„æ•°æ®å³é—®å·é¢˜ç›®ï¼Œ`fieldItems`ä¸­å°±æ˜¯é€‰é¡¹ä¿¡æ¯ï¼Œ`isSelected`çš„å€¼å†³å®šäº†è¯¥é€‰é¡¹é»˜è®¤æ˜¯å¦é€‰ä¸­ï¼Œå› ä¸ºé»˜è®¤é€‰ä¸­çš„è¡¨å•æ˜¯å­¦ç”Ÿæ²¡æœ‰æ„ŸæŸ“çš„æƒ…å†µï¼Œæ‰€ä»¥è¿™ç»™äº†æˆ‘ä»¬è‡ªåŠ¨æ„é€ è¿”å›æ•°æ®çš„å¯èƒ½æ€§ã€‚

#### 4. æäº¤è¡¨å•

```
/wec-counselor-collector-apps/stu/collector/submitForm
```

**Postè¯·æ±‚æ ¼å¼**

```json
{
     "formWid": "309",
     "address": "xå›½xçœxå¸‚",
     "collectWid": "19340",
     "schoolTaskWid": "55898",
     "form": [
          {
               "wid": "5766",
               "formWid": "309",
               "fieldType": 2,
               "title": "ä½ çš„å­¦ç”Ÿç±»åˆ«",
               "description": "",
               "minLength": 0,
               "sort": "1",
               "maxLength": null,
               "isRequired": 1,
               "imageCount": null,
               "hasOtherItems": 0,
               "colName": "field001",
               "value": "ä¸“ç§‘ç”Ÿ",
               "minValue": 0,
               "maxValue": 0,
               "isDecimal": true,
               "fieldItems": [
                    {
                         "itemWid": "14741",
                         "content": "ä¸“ç§‘ç”Ÿ",
                         "isOtherItems": 0,
                         "contendExtend": "",
                         "isSelected": 1
                    }
               ]
          }
         ......
```

å¯ä»¥çœ‹çš„åˆ°ï¼Œæäº¤æ•°æ®æ‰€å¿…é¡»çš„`formWid` `collectWid`å¯ä»¥ä»æ¥å£ä¸€ä¸­è·å–ï¼Œé€šè¿‡æ¥å£äºŒè·å–`schoolTaskWid`ï¼Œæœ€åå†æ ¹æ®æ¥å£ä¸‰è·å–fromè¯¦ç»†çš„é€‰é¡¹ä¿¡æ¯ï¼Œæ„é€ å‡º`form`éƒ¨åˆ†(å…¶å®å°±æ˜¯æŠŠæ²¡æœ‰é€‰ä¸­çš„é€‰é¡¹remove)éœ€è¦æ³¨æ„çš„æ˜¯**è¯·æ±‚å¤´ä¸­å¿…é¡»è¦æœ‰`Cpdaily-Extension`**ï¼Œè¿™æ˜¯ä¸€ä¸²å¯†æ–‡ï¼Œæˆ‘ä¹Ÿæ²¡ææ‡‚æ˜¯ä»€ä¹ˆï¼Œä¹Ÿä¸çŸ¥é“åŠ å¯†æ–¹å¼ã€‚ä½†å¯ä»¥ç¡®å®šæ˜¯ï¼ŒæœåŠ¡å™¨åªéªŒè¯æ˜¯å¦èƒ½è§£å¯†ï¼Œä¸éªŒè¯æ•°æ®æ­£ç¡®æ€§ã€‚æ‰€ä»¥ä¸€ä¸²å¯†æ–‡ï¼Œå¯ä»¥é€šç”¨æ‰€æœ‰äººã€‚

ä»¥ä¸Šæ¥å£éƒ½éœ€è¦ç™»å½•æ‰èƒ½ä½¿ç”¨ï¼Œä¸”ç™»å½•åæœ‰ä¸€æ¡å…³é”®**cookie**å®ƒçš„æœ‰æ•ˆæœŸ**éå¸¸éå¸¸éå¸¸çŸ­**ï¼ŒåŸºæœ¬ä¸Šæ–­äº†æ‰‹åŠ¨å†™å…¥**cookie**çš„æƒ³æ³•ï¼Œåæ¥æˆ‘åœ¨æŸ¥æ‰¾èµ„æ–™çš„é€”ä¸­ï¼Œå‘ç°äº†åˆ«äººé€ å¥½çš„è½®å­(ç™»å½•åŠŸèƒ½æ˜¯æˆ‘ä»è¯¥é¡¹ç›®ä¸ŠäºŒæ¬¡å¼€å‘)ï¼Œæ€è·¯ä¹Ÿæ˜¯è§£æhtmlè·å–å¿…è¦ä¿¡æ¯ï¼Œå‘é€è¯·æ±‚è·å–**cookie**ã€‚**butï¼**ä½œè€…å®ç°äº†ocrè¯†åˆ«éªŒè¯ç ï¼Œè¿™æ˜¯ä¸ªå±é™©çš„åŠŸèƒ½ã€‚ä½†æˆ‘ç”¨äº†äººå®¶çš„ä»£ç è¿˜æ˜¯åº”è¯¥å°†é¡¹ç›®é“¾æ¥æ”¾åœ¨è¿™ï¼š[é“¾æ¥]( https://github.com/ZimoLoveShuang/wisedu-unified-login-api  "")

<font style="font-weight:bold;" size=4>Â æŠ€æœ¯æœ‰ç½ªï¼Œåˆ‡è®°ï¼Œåˆ‡è®°!</font>

ç™»å½•æ¥å£å°±ä¸æ”¾å‡ºæ¥äº†

## 1.2 ä»£ç å®ç°

è¿™ç§éœ€æ±‚pythonæ˜¾ç„¶æ›´å…·ä¼˜åŠ¿ï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯:

**é…ç½®æ–‡ä»¶è¯»å–ç”¨æˆ·ä¿¡æ¯** -> **å°è¯•ç™»é™†è·å–cookie** ->  **æºå¸¦cookieè·å–å¾…å¡«è¡¨å•ä¿¡æ¯å¹¶æ„é€ å¾…æäº¤ä¿¡æ¯** -> **æäº¤**

ä»£ç æˆ‘å°±æ”¾åœ¨è¿™å§ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è®¨è®ºä¸€ä¸‹ğŸ˜¸ğŸ˜¸

**å¼€å‘ç¯å¢ƒï¼šPython 3.8**

[è„šæœ¬ä¸‹è½½é“¾æ¥](https://qsbk-blog.oss-cn-beijing.aliyuncs.com/code/AutoSignIn.zip)

## 1.3 ä½¿ç”¨æ–¹æ³•

**1) åˆ›å»ºé˜¿é‡Œäº‘è´¦å·**

é˜¿é‡Œäº‘å®˜ç½‘ï¼š[é“¾æ¥]( https://account.aliyun.com/login/qr_login.htm )

æ‰“å¼€ç½‘é¡µè¿›å…¥é˜¿é‡Œäº‘å®˜ç½‘ï¼Œé˜¿é‡Œäº‘å¯ä»¥ä½¿ç”¨**æ”¯ä»˜å®**æˆ–**æ·˜å®è´¦å·**ç™»å½•ï¼Œå¦‚æœæç¤ºå®åè®¤è¯å°±æŒ‰ç…§æç¤ºæ¥ã€‚

![](https://qsbk-blog.oss-cn-beijing.aliyuncs.com/img/é˜¿é‡Œäº‘ç™»å½•.png)

åœ¨è¿›å…¥ç™»å½•è·³è½¬ç•Œé¢åï¼Œç‚¹å‡»**æ§åˆ¶å°**

![](https://qsbk-blog.oss-cn-beijing.aliyuncs.com/img/é˜¿é‡Œäº‘æ§åˆ¶å°æŒ‰é’®.png)

è¿›å…¥æ§åˆ¶å°åå•å‡»**ä¾§è¾¹æ  **

![](https://qsbk-blog.oss-cn-beijing.aliyuncs.com/img/é˜¿é‡Œäº‘ä¾§è¾¹æ æŒ‰é’®.png)

**äº§å“ä¸æœåŠ¡** -> **å‡½æ•°è®¡ç®— **

å•å‡»å‡½æ•°è®¡ç®—åä¼šæç¤ºä½ å¼€é€šï¼Œå¼€é€šå°±å¥½äº†ï¼Œå¦‚æœåªæ˜¯æŒ‚ç­¾åˆ°ï¼Œ**åªèƒ½ç”¨çš„åˆ°å…è´¹é¢åº¦çš„ä¸‡åˆ†ä¹‹ä¸€**ã€‚

![](https://qsbk-blog.oss-cn-beijing.aliyuncs.com/img/é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—å…¥å£.png)

**æ–°æ‰‹æ•™ç¨‹å¯ä»¥è·³è¿‡**ï¼Œè¿›å…¥å‡½æ•°è®¡ç®—çš„æ§åˆ¶å°ç•Œé¢åç‚¹å‡»ï¼š

**æœåŠ¡/å‡½æ•°** -> **æ–°å»ºå‡½æ•°** -> **ä¸‹ä¸€æ­¥**

å‡½æ•°åç§°å¡«å†™`SignIn`è¿è¡Œç¯å¢ƒé€‰æ‹©`Python3`å‡½æ•°å…¥å£æ”¹ä¸º`SignIn.main`å…¶ä»–é»˜è®¤ï¼Œç‚¹å‡»å®Œæˆ

è·³è½¬åè¿›å…¥å‡½æ•°ç¼–è¾‘çŠ¶æ€ï¼Œé€‰æ‹©ä»£ç åŒ…ä¸Šä¼  [ä»£ç åŒ…é“¾æ¥](https://qsbk-blog.oss-cn-beijing.aliyuncs.com/code/AutoSignIn_aliyun.zip)

ä¸‹è½½è¯¥ä»£ç åŒ…ï¼Œ**æ³¨æ„è¿™ä¸ªä»£ç å’Œ1.2ä¸­çš„ä»£ç ä¸åŒ**

é€‰æ‹©**ä»£ç åŒ…ä¸Šä¼ ** -> **é€‰æ‹©æ–‡ä»¶** é€‰æ‹©åˆšåˆšä¸‹è½½çš„zipæ–‡ä»¶

![](https://qsbk-blog.oss-cn-beijing.aliyuncs.com/img/äº‘å‡½æ•°è®¡ç®—ä»£ç åŒ…ä¸Šä¼ æŒ‰é’®.png)

ç‚¹å‡»ä¿å­˜æŒ‰é’®

![](https://qsbk-blog.oss-cn-beijing.aliyuncs.com/img/ä»£ç åŒ…ä¸Šä¼ ä¿å­˜.png)

è¿›å…¥åœ¨çº¿ç¼–è¾‘åé€‰æ‹©**config.ini**åˆ†åˆ«ä¿®æ”¹`user_num` `password` `address`ä¸ºä½ çš„å­¦å·ï¼Œå¯†ç å’Œåœ°å€ã€‚

![](https://qsbk-blog.oss-cn-beijing.aliyuncs.com/img/SignInä¿®æ”¹é…ç½®æ–‡ä»¶.png)

ç¼–è¾‘å®Œæˆåå¯ä»¥å•å‡»![](https://qsbk-blog.oss-cn-beijing.aliyuncs.com/img/ä¿å­˜æ‰§è¡ŒæŒ‰é’®.png)   æŒ‰é’®ä¿å­˜å¹¶æ‰§è¡Œï¼Œå¦‚æœä»Šå¤©æ²¡æœ‰å¡«è¡¨ï¼Œå¯ä»¥å»ä»Šæ—¥æ ¡å›­æŸ¥çœ‹ä¸€ä¸‹æ˜¯ä¸æ˜¯å·²ç»å¡«å¥½äº†ã€‚

éšå**ç‚¹å‡»è§¦å‘å™¨é€‰é¡¹å¡** -> **åˆ›å»ºè§¦å‘å™¨** -> æœåŠ¡ç±»å‹é€‰æ‹©**å®šæ—¶è§¦å‘å™¨**

è§¦å‘å™¨åç§°éšä¾¿å¡«ï¼Œï¼Œæˆ‘ç”¨çš„`everyDay`ã€‚æ—¶é—´é…ç½®é€‰æ‹©**Cronè¡¨è¾¾å¼**

**å¡«å†™å†…å®¹éœ€è¦æ³¨æ„ä¸€ä¸‹**

```
x y z * * *
```

x y z åˆ†åˆ«ä»£è¡¨ç§’ï¼Œåˆ†ï¼Œæ—¶ï¼Œå› ä¸º**Cron**ä½¿ç”¨çš„æ˜¯**UTCæ—¶é—´**ï¼ˆ**UTCæ—¶é—´+8ä¸ªå°æ—¶ä¸ºåŒ—äº¬æ—¶é—´**ï¼‰æ‰€ä»¥:

`0 0 0 * * * ä»£è¡¨æ—©ä¸Š8:00`

`0 20 0 * * * ä»£è¡¨æ—©ä¸Š8:20`

`0 32 20 * * * ä»£è¡¨æ—©ä¸Š4:32`

**æ³¨æ„ï¼ä¸è¦ç…§æŠ„æˆ‘è¿™ä¸ªæ—¶é—´ï¼Œéœ€è¦è‡ªå·±ä¿®æ”¹ä¸€ä¸‹ï¼Œæ—¶é—´ä¹Ÿå°½é‡ä¸è¦é€‰æ‹©æ¯”è¾ƒå¤šçš„8:00è¿™ç§æ•´æ—¶ï¼Œæ•´åˆ†çš„æ—¶é—´ï¼Œå°½é‡ä½¿ç”¨è¯¸å¦‚**

`0 31 0 * * * `

`0 52 0 * * *`ä¹‹ç±»çš„æ—¶é—´æ¥é¿å…å¹¶å‘ï¼Œç‚¹å‡»ç¡®å®šå°±å…¨éƒ¨é…ç½®å¥½äº†ï¼Œè¯¥è„šæœ¬ä¼šè‡ªåŠ¨åœ¨**ä½ è®¾å®šçš„æ—¶é—´**å°è¯•å¡«è¡¨ã€‚



æœ¬æ–‡ç»“æŸ